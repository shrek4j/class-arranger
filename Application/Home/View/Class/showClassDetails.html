<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="icon" href="../../favicon.ico">

	<title>课程明细</title>
	<!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- bootstrap datepicker -->
    <link id="bsdp-css" href="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/css/datepicker3.css" rel="stylesheet">
    
    <style type="text/css">
        .main-view{overflow-y:scroll;position:fixed;width:83.5%;height:98%;margin:0.5% 0.5% 0.5% 16%;padding:0.8% 0.8% 0.8% 1.2%;background:white;box-shadow:0 1px 2px 0 rgba(0,0,0,0.1)}
        .main-view-inner{margin:2% 6% 2% 2%;}
        .main-view-inner-bar{margin:2% 2% 2% 2%;}
        .class-detail-list{margin:2% 2% 2% 2%;}
        .class-detail-list .list-group{margin-bottom:0px}
        .class-detail-list .finished .list-group li{padding:10px;margin-top:5px;background-color:#339966;color:white;box-shadow:0 1px 2px 0 rgba(0,0,0,0.2)}
        .class-detail-list .finished .list-group li.cactive{background-color:#339966;color:white;}
        .class-detail-list .unfinished .list-group li{padding:10px;margin-top:5px;background-color:white;color:#339966;box-shadow:0 1px 2px 0 rgba(0,0,0,0.2)}
        .class-detail-list .unfinished .list-group li.cactive{background-color:#FF9933;color:white;}
        .cell-operation-gutter{margin-left:10%}
    </style>
    
</head>
 <body class="global">   
 <!-- 导航 -->
<include file="Public:nav" />

<div class="main-view">
    <div class="main-view-inner">
        <div class="main-view-inner-bar">
            <h3 style="display: inline-block;">{$classInfo[0].class_name}</h3><h4 style="margin:0px 0px 0px 20px;display: inline-block;"><span class="label" style="background-color: #333366;">{$classInfo[0].classtype_name}</span></h4>
        </div>
        <div class="class-detail-list">
            <div id="unplay" class="finished">
                <ul id="list1" class="list-group">
                <foreach name="classDetails" item="vo">
                  <if condition="strtotime($vo['date']) lt time()">
                  <li class="list-group-item container-fluid finished">
                    <div class="row text-center">
                        <div class="col-md-2">{$vo.date}</div>
                        <div class="col-md-1">
                            <if condition="$vo.day_of_week eq 1">
                                星期一
                            <elseif condition="$vo.day_of_week eq 2"/>
                                星期二
                            <elseif condition="$vo.day_of_week eq 3"/>
                                星期三
                            <elseif condition="$vo.day_of_week eq 4"/>
                                星期四
                            <elseif condition="$vo.day_of_week eq 5"/>
                                星期五
                            <elseif condition="$vo.day_of_week eq 6"/>
                                星期六
                            <else /> 
                                星期日
                            </if>
                        </div>
                        <div class="col-md-2">{$vo.start_time}-{$vo.end_time}</div>
                        <div class="col-md-1">{$vo.teacher_name}</div>
                        <div class="col-md-1">{$vo.classroom_name}</div>
                        <div class="col-md-1">学生</div>
                        <div class="col-md-2">
                            <span style="cursor:pointer" class="glyphicon glyphicon-pencil" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="编辑"></span>
                            <span style="cursor:pointer" class="glyphicon glyphicon-trash cell-operation-gutter" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="删除"></span>
                        </div>
                    </div>
                  </li>
                  </if>
                </foreach>
                </ul>
            </div>
            <div id="play" class="unfinished">
                <ul id="list1" class="list-group">
                <foreach name="classDetails" item="vo">
                  <if condition="strtotime($vo['date']) gt time()">
                  <li class="list-group-item">
                    <div class="row text-center">
                        <div class="col-md-2">{$vo.date}</div>
                        <div class="col-md-1">
                            <if condition="$vo.day_of_week eq 1">
                                星期一
                            <elseif condition="$vo.day_of_week eq 2"/>
                                星期二
                            <elseif condition="$vo.day_of_week eq 3"/>
                                星期三
                            <elseif condition="$vo.day_of_week eq 4"/>
                                星期四
                            <elseif condition="$vo.day_of_week eq 5"/>
                                星期五
                            <elseif condition="$vo.day_of_week eq 6"/>
                                星期六
                            <else /> 
                                星期日
                            </if>
                        </div>
                        <div class="col-md-2">{$vo.start_time}-{$vo.end_time}</div>
                        <div class="col-md-1">{$vo.teacher_name}</div>
                        <div class="col-md-1">{$vo.classroom_name}</div>
                        <div class="col-md-1">学生</div>
                        <div class="col-md-2">
                            <span style="cursor:pointer" class="glyphicon glyphicon-pencil" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="编辑"></span>
                            <span style="cursor:pointer" class="glyphicon glyphicon-trash cell-operation-gutter" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="删除" onclick="deleteClassDetail({$vo.class_id},{$vo.class_detail_id});"></span>
                        </div>
                    </div>
                  </li>
                  </if>
                </foreach>
                </ul>
            </div>
        </div>
    </div>
    
    
</div>

	<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <!-- YUI -->
    <script src="http://yui.yahooapis.com/3.18.1/build/yui/yui-min.js"></script>
    <!-- bootstrap datepicker -->
    <script src="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/js/locales/bootstrap-datepicker.zh-CN.js" charset="UTF-8"></script>
    <script src="/Public/js/class.js"></script>
    
    <script type="text/javascript">
	        $(function () {
			  $('[data-toggle="tooltip"]').tooltip()
			});

        YUI().use('dd-constrain', 'dd-proxy', 'dd-drop', function(Y) {
            //Listen for all drop:over events
            Y.DD.DDM.on('drop:over', function(e) {
                //Get a reference to our drag and drop nodes
                var drag = e.drag.get('node'),
                    drop = e.drop.get('node');
        
                //Are we dropping on a li node?
                if (drop.get('tagName').toLowerCase() === 'li') {
                    //Are we not going up?
                    if (!goingUp) {
                        drop = drop.get('nextSibling');
                    }
                    //Add the node to this list
                    e.drop.get('node').get('parentNode').insertBefore(drag, drop);
                    //Resize this nodes shim, so we can drop on it later.
                    e.drop.sizeShim();
                }
            });
            //Listen for all drag:drag events
            Y.DD.DDM.on('drag:drag', function(e) {
                //Get the last y point
                var y = e.target.lastXY[1];
                //is it greater than the lastY var?
                if (y < lastY) {
                    //We are going up
                    goingUp = true;
                } else {
                    //We are going down.
                    goingUp = false;
                }
                //Cache for next check
                lastY = y;
            });
            //Listen for all drag:start events
            Y.DD.DDM.on('drag:start', function(e) {
                //Get our drag object
                var drag = e.target;
                //Set some styles here
                drag.get('node').setStyle('opacity', '.25');
                drag.get('dragNode').set('innerHTML', drag.get('node').get('innerHTML'));
                drag.get('dragNode').setStyles({
                    opacity: '.5',
                    borderColor: drag.get('node').getStyle('borderColor'),
                    backgroundColor: drag.get('node').getStyle('backgroundColor')
                });
            });
            //Listen for a drag:end events
            Y.DD.DDM.on('drag:end', function(e) {
                var drag = e.target;
                //Put our styles back
                drag.get('node').setStyles({
                    visibility: '',
                    opacity: '1'
                });
            });
            //Listen for all drag:drophit events
            Y.DD.DDM.on('drag:drophit', function(e) {
                var drop = e.drop.get('node'),
                    drag = e.drag.get('node');
        
                //if we are not on an li, we must have been dropped on a ul
                if (drop.get('tagName').toLowerCase() !== 'li') {
                    if (!drop.contains(drag)) {
                        drop.appendChild(drag);
                    }
                }
            });
        
            //Static Vars
            var goingUp = false, lastY = 0;
        
            //Get the list of li's in the lists and make them draggable
            var lis = Y.Node.all('#play ul li');
            lis.each(function(v, k) {
                var dd = new Y.DD.Drag({
                    node: v,
                    target: {
                        padding: '0 0 0 20'
                    }
                }).plug(Y.Plugin.DDProxy, {
                    moveOnEnd: false
                }).plug(Y.Plugin.DDConstrained, {
                    constrain2node: '#play'
                });
            });
        
            //Create simple targets for the 2 lists.
            var uls = Y.Node.all('#play ul');
            uls.each(function(v, k) {
                var tar = new Y.DD.Drop({
                    node: v
                });
            });
        
        });
        
        $('#datepicker').datepicker({
            format: "yyyy-mm-dd",
            weekStart: 1,
            language: "zh-CN",
            autoclose: true
        });
    </script>
</body>
</html>
